{
"id": "common",
"functions": [
{
"id": "FileIsaBlob",
"names": ["File isa Blob"],
"cost": 0,
"templates": [{
"code": "$next",
"in": [{"type": "File", "name": "file"}],
"out": [{"type": "Blob", "name": "file"}]
}]
},
{
"id": "DataUrlIsaUrl",
"names": ["DataUrl isa url"],
"cost": 0,
"templates": [{
"code": "$next",
"in": [{"type": "DataUrl", "name": "dataUrl"}],
"out": [{"type": "url", "name": "dataUrl"}]
}]
},
{
"id": "BlobUrlIsaUrl",
"names": ["BlobUrl isa url"],
"cost": 0,
"templates": [{
"code": "$next",
"in": [{"type": "BlobUrl", "name": "blobUrl"}],
"out": [{"type": "url", "name": "blobUrl"}]
}]
},
{
"id": "UrlIsaString",
"names": ["url isa string"],
"cost": 0,
"templates": [{
"code": "$next",
"in": [{"type": "url", "name": "url"}],
"out": [{"type": "string", "name": "url"}]
}]
},
{
"id": "FileReader.readAsArrayBuffer",
"doc": "http://docs.webplatform.org/wiki/apis/file/FileReader/readAsArrayBuffer",
"names": ["readAsArrayBuffer", "FileReader.readAsArrayBuffer"],
"templates": [{
"in": [{"type": "Blob", "name": "blob"}],
"out": [{"type": "ArrayBuffer", "name": "arrayBuffer"}],
"code": "var reader = new FileReader();\nreader.addEventListener(\"load\", function() {\n\tvar $arrayBuffer = reader.result;\n\t$next\n});\nreader.addEventListener(\"error\", function() { console.error(reader.error); });\nreader.readAsArrayBuffer($blob);\n"
}]},
{
"id": "FileReader.readAsDataURL",
"doc": "http://docs.webplatform.org/wiki/apis/file/FileReader/readAsDataURL",
"names": ["readAsDataURL", "FileReader.readAsDataURL"],
"cost": 2,
"templates": [{
"in": [{"type": "Blob", "name": "blob"}],
"out": [{"type": "DataUrl", "name": "dataUrl"}],
"code": "var reader = new FileReader();\nreader.addEventListener(\"load\", function() {\n\tvar $dataUrl = reader.result;\n\t$next\n});\nreader.addEventListener(\"error\", function() { console.error(reader.error); });\nreader.readAsDataURL($blob);\n"
}]},
{
"id": "FileReader.readAsText",
"doc": "http://docs.webplatform.org/wiki/apis/file/FileReader/readAsText",
"names": ["readAsText", "FileReader.readAsText"],
"templates": [{
"in": [{"type": "Blob", "name": "blob"}],
"out": [{"type": "string", "name": "str"}],
"code": "var reader = new FileReader();\nreader.addEventListener(\"load\", function() {\n\tvar $str = reader.result;\n\t$next\n});\nreader.addEventListener(\"error\", function() { console.error(reader.error); });\nreader.readAsText($blob);\n"
}]},
{
"id": "createElementImg",
"names": ["Create image element", "document.createElement(\"img\")", "new Image()"],
"templates": [{
"in": [{"type": "url", "name": "imageUrl"}],
"out": [{"type": "HTMLImageElement", "name": "image"}],
"code": "var $image = document.createElement(\"img\");\nimage.addEventListener(\"load\", function() {\n\tdocument.body.appendChild(image);\n\t$next\n});\nimage.addEventListener(\"error\", function() { console.error(\"image load error\"); });\nimage.src = $imageUrl;\n"
}]},
{
"id": "createObjectURL",
"doc": "http://docs.webplatform.org/wiki/apis/file/URL/createObjectURL",
"names": ["createObjectURL", "window.URL.createObjectURL"],
"templates": [{
"in": [{"type": "MSStream", "name": "blob"}],
"out": [{"type": "BlobUrl", "name": "blobUrl"}],
"code": "var $blobUrl = URL.createObjectURL($blob);\n$next"
}]},
{
"id": "revokeObjectURL",
"doc": "http://docs.webplatform.org/wiki/apis/file/URL/revokeObjectURL",
"names": ["revokeObjectURL", "window.URL.revokeObjectURL"],
"templates": [{
"in": [{"type": "BlobUrl", "name": "blobUrl"}],
"out": [],
"code": "URL.revokeObjectURL($blobUrl);\n$next"
}]}
]}
